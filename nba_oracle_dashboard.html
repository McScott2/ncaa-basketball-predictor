<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NBA Oracle â€” God Mode Predictions</title>
<link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=DM+Sans:wght@300;400;500;600&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #060810; --bg2: #0d1117; --bg3: #131920;
    --accent: #f5a623; --accent2: #e8421a;
    --green: #00e676; --red: #ff4444; --blue: #2979ff;
    --text: #e8eaf0; --muted: #5a6478; --border: rgba(255,255,255,0.06);
  }
  * { margin:0; padding:0; box-sizing:border-box; }
  body { font-family:'DM Sans',sans-serif; background:var(--bg); color:var(--text); min-height:100vh; overflow-x:hidden; }
  body::before { content:''; position:fixed; inset:0; background:radial-gradient(ellipse 80% 50% at 10% 0%,rgba(245,166,35,0.07),transparent 60%),radial-gradient(ellipse 60% 40% at 90% 100%,rgba(41,121,255,0.06),transparent 60%); pointer-events:none; z-index:0; }
  body::after { content:''; position:fixed; inset:0; background-image:linear-gradient(rgba(255,255,255,0.02) 1px,transparent 1px),linear-gradient(90deg,rgba(255,255,255,0.02) 1px,transparent 1px); background-size:40px 40px; pointer-events:none; z-index:0; }
  .container { max-width:1200px; margin:0 auto; padding:0 24px; position:relative; z-index:1; }

  /* HEADER */
  header { border-bottom:1px solid var(--border); padding:20px 0; position:sticky; top:0; background:rgba(6,8,16,0.92); backdrop-filter:blur(20px); z-index:100; }
  .header-inner { display:flex; align-items:center; justify-content:space-between; }
  .logo { display:flex; align-items:center; gap:12px; }
  .logo-icon { width:40px; height:40px; background:linear-gradient(135deg,var(--accent),var(--accent2)); border-radius:10px; display:flex; align-items:center; justify-content:center; font-size:20px; box-shadow:0 0 20px rgba(245,166,35,0.3); }
  .logo-text { font-family:'Bebas Neue',sans-serif; font-size:28px; letter-spacing:2px; background:linear-gradient(135deg,var(--accent),#fff); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
  .logo-sub { font-size:10px; color:var(--muted); letter-spacing:3px; text-transform:uppercase; font-family:'JetBrains Mono',monospace; }
  .live-badge { display:flex; align-items:center; gap:8px; background:rgba(0,230,118,0.1); border:1px solid rgba(0,230,118,0.2); border-radius:20px; padding:6px 14px; font-size:12px; color:var(--green); font-family:'JetBrains Mono',monospace; letter-spacing:1px; }
  .live-dot { width:8px; height:8px; background:var(--green); border-radius:50%; animation:pulse 2s infinite; }
  @keyframes pulse { 0%,100%{opacity:1;transform:scale(1)} 50%{opacity:0.4;transform:scale(0.8)} }

  /* STATS */
  .stats-bar { display:grid; grid-template-columns:repeat(4,1fr); gap:16px; margin-bottom:40px; }
  .stat-card { background:var(--bg2); border:1px solid var(--border); border-radius:16px; padding:24px; position:relative; overflow:hidden; transition:transform 0.2s,border-color 0.2s; }
  .stat-card:hover { transform:translateY(-2px); border-color:rgba(245,166,35,0.2); }
  .stat-card::before { content:''; position:absolute; top:0; left:0; right:0; height:2px; background:linear-gradient(90deg,var(--accent),var(--accent2)); opacity:0.6; }
  .stat-label { font-size:11px; letter-spacing:2px; text-transform:uppercase; color:var(--muted); font-family:'JetBrains Mono',monospace; margin-bottom:12px; }
  .stat-value { font-family:'Bebas Neue',sans-serif; font-size:48px; line-height:1; color:var(--accent); margin-bottom:6px; }
  .stat-sub { font-size:12px; color:var(--muted); }
  .stat-trend { font-size:12px; color:var(--green); margin-top:8px; }

  /* HERO */
  .hero { padding:50px 0 30px; text-align:center; }
  .hero-tag { display:inline-block; font-family:'JetBrains Mono',monospace; font-size:11px; letter-spacing:4px; color:var(--accent); text-transform:uppercase; margin-bottom:20px; padding:6px 16px; border:1px solid rgba(245,166,35,0.3); border-radius:20px; }
  .hero h1 { font-family:'Bebas Neue',sans-serif; font-size:clamp(48px,8vw,96px); line-height:0.95; letter-spacing:3px; margin-bottom:20px; }
  .hero h1 span { background:linear-gradient(135deg,var(--accent),var(--accent2)); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
  .hero p { font-size:17px; color:var(--muted); max-width:500px; margin:0 auto 30px; line-height:1.7; }

  /* SECTION */
  .section-header { display:flex; align-items:center; justify-content:space-between; margin-bottom:24px; }
  .section-title { font-family:'Bebas Neue',sans-serif; font-size:32px; letter-spacing:2px; }
  .section-title span { color:var(--accent); }
  .section-badge { font-family:'JetBrains Mono',monospace; font-size:11px; color:var(--muted); letter-spacing:2px; text-transform:uppercase; }

  /* TABS */
  .tabs { display:flex; gap:4px; background:var(--bg2); border:1px solid var(--border); border-radius:12px; padding:4px; margin-bottom:24px; width:fit-content; }
  .tab { padding:10px 24px; border-radius:8px; font-size:13px; font-family:'JetBrains Mono',monospace; letter-spacing:1px; cursor:pointer; color:var(--muted); transition:all 0.2s; border:none; background:none; }
  .tab.active { background:linear-gradient(135deg,var(--accent),var(--accent2)); color:#000; font-weight:700; }

  /* PREDICTIONS */
  .predictions-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(340px,1fr)); gap:16px; margin-bottom:60px; }
  .prediction-card { background:var(--bg2); border:1px solid var(--border); border-radius:16px; padding:24px; position:relative; overflow:hidden; transition:all 0.3s; animation:fadeIn 0.5s ease forwards; opacity:0; }
  @keyframes fadeIn { to{opacity:1;transform:translateY(0)} from{opacity:0;transform:translateY(16px)} }
  .prediction-card:hover { border-color:rgba(245,166,35,0.3); box-shadow:0 8px 32px rgba(0,0,0,0.4); transform:translateY(-3px); }
  .prediction-card.god-pick { border-color:rgba(245,166,35,0.25); background:linear-gradient(135deg,rgba(245,166,35,0.05),var(--bg2)); }
  .god-badge { position:absolute; top:16px; right:16px; font-size:10px; font-family:'JetBrains Mono',monospace; letter-spacing:1px; color:var(--accent); background:rgba(245,166,35,0.1); border:1px solid rgba(245,166,35,0.2); padding:3px 8px; border-radius:4px; }
  .card-teams { display:flex; align-items:center; justify-content:space-between; margin-bottom:20px; }
  .team { text-align:center; flex:1; }
  .team-name { font-family:'Bebas Neue',sans-serif; font-size:22px; letter-spacing:1px; line-height:1.1; }
  .team-record { font-size:11px; color:var(--muted); font-family:'JetBrains Mono',monospace; margin-top:4px; }
  .vs-badge { font-family:'JetBrains Mono',monospace; font-size:11px; color:var(--muted); padding:0 16px; letter-spacing:2px; }
  .card-pick { background:rgba(245,166,35,0.08); border:1px solid rgba(245,166,35,0.15); border-radius:10px; padding:12px 16px; display:flex; align-items:center; justify-content:space-between; margin-bottom:16px; }
  .pick-label { font-size:11px; color:var(--muted); font-family:'JetBrains Mono',monospace; letter-spacing:1px; text-transform:uppercase; margin-bottom:4px; }
  .pick-value { font-family:'Bebas Neue',sans-serif; font-size:20px; color:var(--accent); letter-spacing:1px; }
  .conf-track { flex:1; height:4px; background:rgba(255,255,255,0.06); border-radius:2px; overflow:hidden; margin:0 10px; }
  .conf-fill { height:100%; border-radius:2px; background:linear-gradient(90deg,var(--accent2),var(--accent)); }
  .conf-pct { font-family:'JetBrains Mono',monospace; font-size:13px; color:var(--accent); font-weight:700; min-width:40px; text-align:right; }
  .conf-row { display:flex; align-items:center; margin-bottom:16px; }
  .card-stats { display:grid; grid-template-columns:1fr 1fr; gap:10px; margin-top:16px; }
  .card-stat { background:var(--bg3); border-radius:8px; padding:10px 12px; }
  .card-stat-label { font-size:10px; color:var(--muted); letter-spacing:1px; text-transform:uppercase; font-family:'JetBrains Mono',monospace; margin-bottom:4px; }
  .card-stat-value { font-size:14px; font-weight:600; color:var(--text); }
  .ou-badge { display:inline-flex; align-items:center; gap:4px; padding:2px 8px; border-radius:4px; font-size:12px; font-family:'JetBrains Mono',monospace; font-weight:700; }
  .ou-over { background:rgba(0,230,118,0.1); color:var(--green); }
  .ou-under { background:rgba(41,121,255,0.1); color:var(--blue); }
  .tipoff { font-size:11px; color:var(--muted); font-family:'JetBrains Mono',monospace; margin-top:12px; display:flex; align-items:center; gap:6px; flex-wrap:wrap; }
  .strong-ou-tag { font-size:10px; color:var(--accent); font-family:'JetBrains Mono',monospace; background:rgba(245,166,35,0.08); padding:2px 6px; border-radius:4px; margin-left:auto; }

  /* TRACK RECORD */
  .history-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(140px,1fr)); gap:12px; margin-bottom:60px; }
  .history-card { background:var(--bg2); border:1px solid var(--border); border-radius:12px; padding:20px 16px; text-align:center; transition:all 0.2s; }
  .history-card:hover { transform:translateY(-2px); border-color:rgba(255,255,255,0.1); }
  .history-date { font-size:10px; color:var(--muted); font-family:'JetBrains Mono',monospace; letter-spacing:1px; margin-bottom:12px; text-transform:uppercase; }
  .history-pct { font-family:'Bebas Neue',sans-serif; font-size:40px; line-height:1; margin-bottom:6px; }
  .history-score { font-size:12px; color:var(--muted); font-family:'JetBrains Mono',monospace; margin-bottom:8px; }
  .history-bar { height:3px; background:rgba(255,255,255,0.06); border-radius:2px; overflow:hidden; }
  .history-fill { height:100%; border-radius:2px; }

  /* CHART */
  .chart-container { background:var(--bg2); border:1px solid var(--border); border-radius:16px; padding:32px; margin-bottom:60px; }
  .chart-bars { display:flex; align-items:flex-end; gap:12px; height:160px; margin-bottom:12px; }
  .chart-bar-wrap { flex:1; display:flex; flex-direction:column; align-items:center; gap:8px; height:100%; justify-content:flex-end; }
  .chart-bar { width:100%; border-radius:6px 6px 0 0; }
  .chart-bar-label { font-family:'JetBrains Mono',monospace; font-size:12px; color:var(--accent); font-weight:700; }
  .chart-x-labels { display:flex; gap:12px; }
  .chart-x-label { flex:1; text-align:center; font-size:10px; color:var(--muted); font-family:'JetBrains Mono',monospace; letter-spacing:1px; }

  /* SUBSCRIPTION */
  .sub-card { background:linear-gradient(135deg,rgba(245,166,35,0.08),rgba(232,66,26,0.05)); border:1px solid rgba(245,166,35,0.2); border-radius:20px; padding:48px; display:flex; align-items:center; justify-content:space-between; gap:40px; position:relative; overflow:hidden; margin-bottom:60px; }
  .sub-card::before { content:''; position:absolute; top:-50%; right:-10%; width:400px; height:400px; background:radial-gradient(circle,rgba(245,166,35,0.06),transparent 70%); pointer-events:none; }
  .sub-left { flex:1; }
  .sub-tag { font-family:'JetBrains Mono',monospace; font-size:11px; letter-spacing:3px; color:var(--accent); text-transform:uppercase; margin-bottom:16px; }
  .sub-title { font-family:'Bebas Neue',sans-serif; font-size:42px; letter-spacing:2px; line-height:1.1; margin-bottom:16px; }
  .sub-desc { color:var(--muted); font-size:15px; line-height:1.7; max-width:400px; }
  .sub-features { margin-top:24px; display:flex; flex-direction:column; gap:10px; }
  .sub-feature { display:flex; align-items:center; gap:10px; font-size:14px; }
  .sub-feature::before { content:'âœ“'; color:var(--green); font-weight:700; font-family:'JetBrains Mono',monospace; }
  .sub-right { text-align:center; flex-shrink:0; }
  .sub-price { font-family:'Bebas Neue',sans-serif; font-size:72px; line-height:1; background:linear-gradient(135deg,var(--accent),#fff); -webkit-background-clip:text; -webkit-text-fill-color:transparent; }
  .sub-period { font-size:13px; color:var(--muted); font-family:'JetBrains Mono',monospace; margin-bottom:24px; letter-spacing:1px; }
  .sub-btn { display:block; background:linear-gradient(135deg,var(--accent),var(--accent2)); color:#000; font-family:'Bebas Neue',sans-serif; font-size:18px; letter-spacing:2px; padding:16px 40px; border-radius:10px; border:none; cursor:pointer; transition:all 0.2s; text-decoration:none; box-shadow:0 4px 20px rgba(245,166,35,0.3); }
  .sub-btn:hover { transform:translateY(-2px); box-shadow:0 8px 30px rgba(245,166,35,0.4); }
  .sub-note { font-size:11px; color:var(--muted); margin-top:12px; font-family:'JetBrains Mono',monospace; }

  /* LOADING / ERROR */
  .loading { text-align:center; padding:60px; color:var(--muted); font-family:'JetBrains Mono',monospace; font-size:13px; letter-spacing:2px; }
  .spinner { width:32px; height:32px; border:2px solid var(--border); border-top-color:var(--accent); border-radius:50%; margin:16px auto 0; animation:spin 1s linear infinite; }
  @keyframes spin { to{transform:rotate(360deg)} }
  .error-msg { background:rgba(255,68,68,0.08); border:1px solid rgba(255,68,68,0.2); border-radius:10px; padding:16px; color:var(--red); font-family:'JetBrains Mono',monospace; font-size:12px; margin-bottom:24px; }
  .disclaimer { background:rgba(255,68,68,0.05); border:1px solid rgba(255,68,68,0.1); border-radius:10px; padding:12px 16px; font-size:11px; color:var(--muted); font-family:'JetBrains Mono',monospace; margin-bottom:32px; letter-spacing:0.5px; }
  .updated-tag { font-family:'JetBrains Mono',monospace; font-size:10px; color:var(--muted); letter-spacing:1px; margin-bottom:40px; text-align:center; }
  footer { border-top:1px solid var(--border); padding:32px 0; text-align:center; color:var(--muted); font-size:12px; font-family:'JetBrains Mono',monospace; letter-spacing:1px; }
  footer span { color:var(--accent); }

  @media(max-width:768px) {
    .stats-bar { grid-template-columns:repeat(2,1fr); }
    .sub-card { flex-direction:column; text-align:center; }
    .predictions-grid { grid-template-columns:1fr; }
  }
</style>
</head>
<body>

<header>
  <div class="container">
    <div class="header-inner">
      <div class="logo">
        <div class="logo-icon">ğŸ€</div>
        <div>
          <div class="logo-text">NBA ORACLE</div>
          <div class="logo-sub">God Mode Prediction Engine</div>
        </div>
      </div>
      <div class="live-badge">
        <div class="live-dot"></div>
        <span id="live-date">LOADING...</span>
      </div>
    </div>
  </div>
</header>

<div class="container">
  <div class="hero">
    <div class="hero-tag">âš¡ AI-Powered Sports Intelligence</div>
    <h1>PREDICT.<br><span>WIN.</span> REPEAT.</h1>
    <p>Professional-grade NBA predictions powered by Pythagorean expectation, Four Factors modeling, and real Vegas line integration.</p>
  </div>

  <!-- STATS -->
  <div class="stats-bar">
    <div class="stat-card">
      <div class="stat-label">Overall Accuracy</div>
      <div class="stat-value" id="stat-accuracy">â€”</div>
      <div class="stat-sub" id="stat-accuracy-sub">Loading...</div>
      <div class="stat-trend" id="stat-trend">â†‘ Improving daily</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Best Night</div>
      <div class="stat-value" id="stat-best">â€”</div>
      <div class="stat-sub" id="stat-best-sub">Loading...</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Total Predictions</div>
      <div class="stat-value" id="stat-total">â€”</div>
      <div class="stat-sub">NBA games analyzed</div>
    </div>
    <div class="stat-card">
      <div class="stat-label">Days Tracked</div>
      <div class="stat-value" id="stat-days">â€”</div>
      <div class="stat-sub">Days of data</div>
    </div>
  </div>

  <div class="updated-tag" id="updated-tag">Last updated: â€”</div>

  <div class="disclaimer">
    âš ï¸ DISCLAIMER: Predictions are for entertainment and informational purposes only. Bet responsibly. Never stake more than you can afford to lose.
  </div>

  <!-- TODAY'S PREDICTIONS -->
  <div class="section-header">
    <div class="section-title">TONIGHT'S <span>PICKS</span></div>
    <div class="section-badge" id="games-badge">Loading...</div>
  </div>

  <div class="tabs">
    <button class="tab active" onclick="filterPicks('all',this)">ALL GAMES</button>
    <button class="tab" onclick="filterPicks('god',this)">GOD PICKS ğŸ”¥</button>
    <button class="tab" onclick="filterPicks('strong',this)">STRONG O/U ğŸ’°</button>
  </div>

  <div id="predictions-grid" class="predictions-grid">
    <div class="loading" style="grid-column:1/-1">
      LOADING PREDICTIONS
      <div class="spinner"></div>
    </div>
  </div>

  <!-- TRACK RECORD -->
  <div class="section-header">
    <div class="section-title">TRACK <span>RECORD</span></div>
    <div class="section-badge">NBA â€¢ Historical Results</div>
  </div>
  <div id="history-grid" class="history-grid">
    <div class="loading">LOADING HISTORY<div class="spinner"></div></div>
  </div>

  <!-- ACCURACY CHART -->
  <div class="section-header">
    <div class="section-title">ACCURACY <span>TREND</span></div>
    <div class="section-badge">Model Improving Daily</div>
  </div>
  <div class="chart-container">
    <div class="chart-bars" id="chart-bars"></div>
    <div class="chart-x-labels" id="chart-x-labels"></div>
  </div>

  <!-- SUBSCRIPTION -->
  <div class="sub-card">
    <div class="sub-left">
      <div class="sub-tag">ğŸ” Premium Access â€” Coming Soon</div>
      <div class="sub-title">GET THE EDGE.<br>EVERY NIGHT.</div>
      <div class="sub-desc">Join the waitlist for NBA Oracle Premium. Get daily God Picks, real Vegas line comparisons, and full model analysis delivered before every game.</div>
      <div class="sub-features">
        <div class="sub-feature">Daily NBA + NCAA predictions</div>
        <div class="sub-feature">Real Vegas line integration</div>
        <div class="sub-feature">God Picks (â‰¥70% confidence only)</div>
        <div class="sub-feature">Strong O/U edge alerts</div>
        <div class="sub-feature">Performance tracking dashboard</div>
      </div>
    </div>
    <div class="sub-right">
      <div class="sub-price">â‚¦2K</div>
      <div class="sub-period">PER MONTH</div>
      <a href="https://wa.me/message/your-whatsapp" class="sub-btn">JOIN WAITLIST</a>
      <div class="sub-note">First 100 subscribers get 50% off</div>
    </div>
  </div>
</div>

<footer>
  <div class="container">
    NBA ORACLE â€” GOD MODE ENGINE v4 &nbsp;|&nbsp; Built with <span>â™¥</span> &nbsp;|&nbsp; Bet Responsibly
  </div>
</footer>

<script>
// â”€â”€ CONFIG â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const DATA_URL = 'https://raw.githubusercontent.com/McScott2/ncaa-basketball-predictor/main/dashboard/predictions.json';

let allPredictions = [];
let currentFilter  = 'all';

// â”€â”€ FETCH LIVE DATA â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
async function loadData() {
  try {
    const res  = await fetch(DATA_URL + '?t=' + Date.now());
    const data = await res.json();
    renderAll(data);
  } catch(e) {
    document.getElementById('predictions-grid').innerHTML =
      `<div class="error-msg" style="grid-column:1/-1">âš ï¸ Could not load live data. Check back soon.<br><small>${e.message}</small></div>`;
  }
}

// â”€â”€ RENDER ALL â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderAll(data) {
  // Updated tag
  document.getElementById('updated-tag').textContent = `Last updated: ${data.updated || 'â€”'} UTC`;
  document.getElementById('live-date').textContent   = new Date().toLocaleDateString('en-GB',{weekday:'short',day:'numeric',month:'short',year:'numeric'}).toUpperCase();

  // Stats
  const s = data.stats || {};
  document.getElementById('stat-accuracy').textContent     = s.accuracy ? s.accuracy + '%' : 'â€”';
  document.getElementById('stat-accuracy-sub').textContent = s.total_picks ? `${s.total_hits}/${s.total_picks} picks` : 'No data yet';
  document.getElementById('stat-best').textContent         = s.best_pct ? s.best_pct + '%' : 'â€”';
  document.getElementById('stat-best-sub').textContent     = s.best_day || 'No data yet';
  document.getElementById('stat-total').textContent        = s.total_picks || 'â€”';
  document.getElementById('stat-days').textContent         = s.days_tracked || 'â€”';

  // Today's predictions
  const today = data.nba_today;
  if (today && today.predictions && today.predictions.length > 0) {
    allPredictions = today.predictions;
    document.getElementById('games-badge').textContent = `${today.date} â€¢ ${allPredictions.length} Games`;
    renderPredictions();
  } else {
    document.getElementById('predictions-grid').innerHTML =
      '<div class="loading" style="grid-column:1/-1;padding:40px">â³ TODAY\'S PREDICTIONS NOT YET AVAILABLE<br><small style="font-size:10px;margin-top:8px;display:block">Check back at 5PM WAT</small></div>';
    document.getElementById('games-badge').textContent = 'Predictions at 5PM WAT';
  }

  // History
  renderHistory(data.nba_history || []);

  // Chart
  renderChart(data.nba_history || []);
}

// â”€â”€ RENDER PREDICTIONS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function filterPicks(filter, el) {
  currentFilter = filter;
  document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
  if(el) el.classList.add('active');
  renderPredictions();
}

function renderPredictions() {
  const grid = document.getElementById('predictions-grid');
  let filtered = allPredictions;
  if (currentFilter === 'god')    filtered = allPredictions.filter(p => p.god || p.conf >= 0.70);
  if (currentFilter === 'strong') filtered = allPredictions.filter(p => p.strong_ou);

  if (filtered.length === 0) {
    grid.innerHTML = '<div class="loading" style="grid-column:1/-1;padding:40px;font-size:12px">NO PICKS MATCH THIS FILTER</div>';
    return;
  }

  grid.innerHTML = filtered.map((p, i) => {
    const conf     = Math.round((p.conf || 0) * 100);
    const pick     = p.pick || 'â€”';
    const matchup  = p.matchup || '';
    const parts    = matchup.split(' @ ');
    const awayFull = parts[0] || '';
    const homeFull = parts[1] || '';
    const away     = awayFull.split(' ').pop();
    const home     = homeFull.split(' ').pop();
    const ou       = p.ou || 'OVER';
    const ou_line  = p.ou_line || 'â€”';
    const edge     = p.edge || 0;
    const isGod    = p.god || conf >= 70;
    const isStrong = p.strong_ou;

    return `
    <div class="prediction-card ${isGod ? 'god-pick' : ''}" style="animation-delay:${i*0.07}s">
      ${isGod ? '<div class="god-badge">ğŸ”¥ GOD PICK</div>' : ''}
      <div class="card-teams">
        <div class="team">
          <div class="team-name">${away}</div>
          <div class="team-record">Away</div>
        </div>
        <div class="vs-badge">@</div>
        <div class="team">
          <div class="team-name">${home}</div>
          <div class="team-record">Home</div>
        </div>
      </div>
      <div class="card-pick">
        <div>
          <div class="pick-label">ğŸ† Pick to Win</div>
          <div class="pick-value">${(pick.split(' ').pop())}</div>
        </div>
        <div style="text-align:right">
          <div class="pick-label">Confidence</div>
          <div class="pick-value">${conf}%</div>
        </div>
      </div>
      <div class="conf-row">
        <div class="conf-track"><div class="conf-fill" style="width:${conf}%"></div></div>
        <div class="conf-pct">${conf}%</div>
      </div>
      <div class="card-stats">
        <div class="card-stat">
          <div class="card-stat-label">Full Game O/U</div>
          <div class="card-stat-value">
            <span class="ou-badge ${ou==='OVER'?'ou-over':'ou-under'}">${ou} ${ou_line}</span>
          </div>
        </div>
        <div class="card-stat">
          <div class="card-stat-label">Est. Total</div>
          <div class="card-stat-value">${Math.round(p.total || 0)} pts</div>
        </div>
        <div class="card-stat">
          <div class="card-stat-label">1st Half O/U</div>
          <div class="card-stat-value">
            <span class="ou-badge ${(p.fh_ou||'OVER')==='OVER'?'ou-over':'ou-under'}">${p.fh_ou||'â€”'} ${p.fh_line||'â€”'}</span>
          </div>
        </div>
        <div class="card-stat">
          <div class="card-stat-label">Vegas Edge</div>
          <div class="card-stat-value" style="color:${edge>=10?'#f5a623':'#5a6478'}">${edge}pts ${edge>=10?'ğŸ’°':''}</div>
        </div>
      </div>
      <div class="tipoff">
        â° ${p.tipoff || 'TBD'} &nbsp;|&nbsp; ${p.line_source || 'Model'} Lines
        ${isStrong ? '<span class="strong-ou-tag">ğŸ’° STRONG EDGE</span>' : ''}
      </div>
    </div>`;
  }).join('');
}

// â”€â”€ RENDER HISTORY â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderHistory(history) {
  const grid = document.getElementById('history-grid');
  const withResults = history.filter(h => h.result && h.result.pct !== undefined);

  if (withResults.length === 0) {
    grid.innerHTML = '<div class="loading" style="padding:30px">NO HISTORY YET</div>';
    return;
  }

  grid.innerHTML = withResults.map(h => {
    const pct   = h.result.pct || 0;
    const hits  = h.result.hits || 0;
    const total = h.result.total || 0;
    const color = pct >= 80 ? '#00e676' : pct >= 65 ? '#f5a623' : '#ff4444';
    const date  = new Date(h.date).toLocaleDateString('en-GB',{day:'numeric',month:'short'}).toUpperCase();
    const emoji = pct === 100 ? 'ğŸ”¥' : pct >= 70 ? 'âœ…' : 'âŒ';

    return `
    <div class="history-card">
      <div class="history-date">${date}</div>
      <div class="history-pct" style="color:${color}">${pct}%</div>
      <div class="history-score">${hits}/${total} ${emoji}</div>
      <div class="history-bar"><div class="history-fill" style="width:${pct}%;background:${color}"></div></div>
    </div>`;
  }).join('');
}

// â”€â”€ RENDER CHART â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function renderChart(history) {
  const withResults = history.filter(h => h.result && h.result.pct !== undefined).slice(-7);
  if (withResults.length === 0) return;

  const bars   = document.getElementById('chart-bars');
  const labels = document.getElementById('chart-x-labels');

  bars.innerHTML = withResults.map(h => {
    const pct   = h.result.pct || 0;
    const color = pct >= 80 ? 'linear-gradient(180deg,#00e676,#00c853)' : pct >= 65 ? 'linear-gradient(180deg,#f5a623,#e8421a)' : 'linear-gradient(180deg,#ff4444,#cc2222)';
    return `
    <div class="chart-bar-wrap">
      <div class="chart-bar-label">${pct}%</div>
      <div class="chart-bar" style="height:${pct*1.4}px;background:${color};opacity:0.85"></div>
    </div>`;
  }).join('');

  labels.innerHTML = withResults.map(h => {
    const date = new Date(h.date).toLocaleDateString('en-GB',{day:'numeric',month:'short'}).toUpperCase();
    return `<div class="chart-x-label">${date}</div>`;
  }).join('');
}

// â”€â”€ INIT â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
loadData();
// Refresh every 5 minutes
setInterval(loadData, 5 * 60 * 1000);
</script>
</body>
</html>
